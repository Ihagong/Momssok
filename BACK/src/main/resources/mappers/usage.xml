<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ihagong.momssok.mapper.UsageMapper">
    <update id="updateLastAccess" parameterType="com.ihagong.momssok.model.dto.UsageDto" >
        UPDATE profile set last_access=#{date} where email_name=#{email_name};
    </update>
    <select id="searchUsageTime" parameterType="com.ihagong.momssok.model.dto.UsageDto" resultType="int">
        SELECT usage_time FROM `usage` WHERE email_name=#{email_name} and date=#{date};
    </select>
    <select id="checkUsageTimeExist" parameterType="com.ihagong.momssok.model.dto.UsageDto" resultType="int">
        SELECT count(*) FROM `usage` WHERE email_name=#{email_name} and date=#{date};
    </select>
    <insert id="registUsageTime" parameterType="com.ihagong.momssok.model.dto.UsageDto" >
        INSERT INTO `usage`(email_name,date,usage_time)
        values (#{email_name},#{date},#{usage_time});
    </insert>
    <update id="updateUsageTime" parameterType="com.ihagong.momssok.model.dto.UsageDto" >
        UPDATE `usage` set usage_time=#{usage_time} WHERE email_name=#{email_name} and date=#{date};
    </update>
</mapper>